(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["forms-create"],{"0a49":function(e,t,n){var i=n("9b43"),r=n("626a"),o=n("4bf8"),a=n("9def"),l=n("cd1c");e.exports=function(e,t){var n=1==e,s=2==e,u=3==e,c=4==e,f=6==e,d=5==e||f,p=t||l;return function(t,l,v){for(var m,h,b=o(t),y=r(b),_=i(l,v,3),x=a(y.length),g=0,w=n?p(t,x):s?p(t,0):void 0;x>g;g++)if((d||g in y)&&(m=y[g],h=_(m,g,b),e))if(n)w[g]=h;else if(h)switch(e){case 3:return!0;case 5:return m;case 6:return g;case 2:w.push(m)}else if(c)return!1;return f?-1:u||c?c:w}}},"0d23":function(e,t,n){"use strict";t["a"]=[{value:"text",component:"vf-input-text"},{value:"select",component:"vf-select",needOptions:!0},{value:"checkbox",component:"vf-checkbox",needOptions:!0},{value:"radio",component:"vf-radio",needOptions:!0}]},1169:function(e,t,n){var i=n("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},1716:function(e,t,n){},3100:function(e,t,n){e.exports=n.p+"img/iphone-portrait.21d5c9a4.png"},"504c":function(e,t,n){var i=n("0d58"),r=n("6821"),o=n("52a7").f;e.exports=function(e){return function(t){var n,a=r(t),l=i(a),s=l.length,u=0,c=[];while(s>u)o.call(a,n=l[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},"5f28":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n      "+e._s(e.isEdit?"Edit":"Create")+" form\n    ")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Name",rules:e.formRules,required:""},model:{value:e.form.form,callback:function(t){e.$set(e.form,"form",t)},expression:"form.form"}}),n("infinity-fields",{model:{value:e.form.fields,callback:function(t){e.$set(e.form,"fields",t)},expression:"form.fields"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"deep-purple lighten-2",disabled:e.loading},on:{click:function(t){e.previewing=!0}}},[e._v("\n        Preview\n      ")]),n("v-btn",{attrs:{color:"success",type:"submit",disabled:e.loading}},[e._v("\n        Submit\n      ")])],1)],1),e.previewing?n("dialog-show",{attrs:{form:e.form},on:{close:function(t){e.previewing=!1}}}):e._e()],1)},r=[],o=(n("96cf"),n("1da1")),a=(n("cadf"),n("551c"),n("097d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Fields")]),n("v-spacer"),n("v-btn",{attrs:{color:"green"},on:{click:function(t){t.preventDefault(),e.creating=!0}}},[e._v("Add")]),e.hasSelected?n("create-field",{attrs:{value:e.value[e.selectedKey]||{},opened:e.creating},on:{close:e.closeFieldCreate,input:e.handleField}}):e._e()],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.value,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.label))]),n("td",[e._v(e._s(t.item.type))]),n("td",[e._v(e._s(t.item.required))]),n("td",[e._v(e._s(t.item.options.length))]),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{attrs:{color:"info"},on:{click:function(n){e.handleEdit(t.index)}}},[e._v("Edit")]),n("v-btn",{attrs:{color:"error"},on:{click:function(n){e.handleDestroy(t.index)}}},[e._v("Destroy")])],1)]}}])})],1)}),l=[];function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return s(e)||u(e)||c()}var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:!0,width:"500"},on:{input:e.close}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n        Add new field\n      ")]),n("v-card-text",[n("v-select",{attrs:{items:e.fieldTypes,rules:e.typeRules,label:"Type",required:""},model:{value:e.field.type,callback:function(t){e.$set(e.field,"type",t)},expression:"field.type"}}),n("v-text-field",{attrs:{rules:e.labelRules,label:"Label",required:""},model:{value:e.field.label,callback:function(t){e.$set(e.field,"label",t)},expression:"field.label"}}),n("v-switch",{attrs:{label:"Required"},model:{value:e.field.required,callback:function(t){e.$set(e.field,"required",t)},expression:"field.required"}}),n("infinity-options",{directives:[{name:"show",rawName:"v-show",value:e.needOptions,expression:"needOptions"}],model:{value:e.field.options,callback:function(t){e.$set(e.field,"options",t)},expression:"field.options"}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)],1)},p=[],v=(n("ac6a"),n("8615"),n("be94")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"infinity-options"},e._l(e.options,function(t,i){return n("vf-option",{key:i,attrs:{"can-destroy":e.canDestroy},on:{input:e.handleOption,destroy:function(t){e.handleDestroy(i)}},model:{value:e.options[i],callback:function(t){e.$set(e.options,i,t)},expression:"options[key]"}})}),1)},h=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("v-text-field",{attrs:{label:"Label"},on:{input:e.handleOption},model:{value:e.option.label,callback:function(t){e.$set(e.option,"label",t)},expression:"option.label"}}),n("v-text-field",{attrs:{label:"Value"},on:{input:e.handleOption},model:{value:e.option.value,callback:function(t){e.$set(e.option,"value",t)},expression:"option.value"}}),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.canDestroy,expression:"canDestroy"}],attrs:{color:"error"},on:{click:function(t){e.$emit("destroy")}}},[e._v("Destroy")])],1)},y=[],_={name:"vf-option",props:{value:{type:Object,required:!0},canDestroy:{type:Boolean,default:!1}},data:function(){return{option:{value:"",label:""}}},mounted:function(){this.setOption(this.value)},methods:{handleOption:function(){this.isValid&&this.$emit("input",this.option)},setOption:function(){this.option=this.value}},computed:{isValid:function(){return this.option.value&&this.option.label}},watch:{value:function(){this.setOption(this.value)}}},x=_,g=(n("e481"),n("2877")),w=Object(g["a"])(x,b,y,!1,null,"3ea706d8",null);w.options.__file="option.vue";var O=w.exports,$={name:"infinity-options",components:{VfOption:O},props:{value:{type:Array,required:!0}},data:function(){return{options:[]}},mounted:function(){this.reset()},methods:{handleOption:function(){this.$emit("input",this.filledOptions)},handleDestroy:function(e){this.$emit("input",this.filledOptions.filter(function(t,n){return n!==e}))},reset:function(){this.options=f(this.value).concat([{label:"",value:""}])}},computed:{filledOptions:function(){return this.options.filter(function(e){return e.label&&e.value})},canDestroy:function(){return this.options.length>1}},watch:{value:function(){this.reset()}}},k=$,q=(n("f872"),Object(g["a"])(k,m,h,!1,null,"89981332",null));q.options.__file="infinity-options.vue";var j=q.exports,A=n("7fbe"),V=n("0d23"),S={name:"dialog-create",components:{InfinityOptions:j},props:{value:{type:Object,default:function(){return{}}},typeRules:{type:Array,default:function(){return[A["a"].required]}},labelRules:{type:Array,default:function(){return[A["a"].required]}}},data:function(){return{field:{type:"",label:"",options:[],required:!1}}},mounted:function(){this.field=Object(v["a"])({},this.field,this.value||{})},methods:{handleSubmit:function(){this.$emit("input",this.field)},close:function(){this.$emit("close")}},computed:{fieldTypes:function(){return Object.values(V["a"]).map(function(e){return e.value})},needOptions:function(){var e=this;return V["a"].some(function(t){return t.needOptions&&t.value===e.field.type})}}},E=S,D=Object(g["a"])(E,d,p,!1,null,null,null);D.options.__file="dialog-create.vue";var C=D.exports,F={name:"infinity-fields",components:{CreateField:C},props:{value:{type:Array,required:!0},headers:{type:Array,default:function(){return[{text:"Label",value:"label",sortable:!1},{text:"Type",value:"type",sortable:!1},{text:"Is required",value:"required",sortable:!1},{text:"Options size",value:"options",sortable:!1},{text:"Actions",value:"type",sortable:!1}]}}},data:function(){return{creating:!1,selectedKey:null}},methods:{handleDestroy:function(e){this.$emit("input",this.value.filter(function(t,n){return n!==e}))},handleEdit:function(e){this.selectedKey=e,this.creating=!0},handleField:function(e){this.hasSelected?this.edit(e,this.selectedKey):this.add(e),this.closeFieldCreate()},add:function(e){this.$emit("input",f(this.value).concat([e]))},edit:function(e,t){this.$emit("input",this.value.map(function(n,i){return i===t?e:n}))},closeFieldCreate:function(){this.selectedKey=null,this.creating=!1}},computed:{hasSelected:function(){return null!==this.selectedKey}}},R=F,T=(n("7944"),Object(g["a"])(R,a,l,!1,null,"0ec76168",null));T.options.__file="infinity-fields.vue";var I=T.exports,M=n("6c48"),K=n("61da"),N={name:"form-create",components:{InfinityFields:I,DialogShow:M["a"]},props:{formRules:{type:Array,default:function(){return[A["a"].required]}}},data:function(){return{previewing:!1,loading:!1,isValid:!0,form:{name:"",fields:[]}}},mounted:function(){this.getForm(this.$route.params.id)},methods:{handleSubmit:function(){this.$refs.form.validate(),this.isValid&&this.save()},save:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,!this.isEdit){e.next=7;break}return e.next=5,this.$store.dispatch("forms/edit",this.form);case 5:e.next=9;break;case 7:return e.next=9,this.$store.dispatch("forms/create",this.form);case 9:this.$nextTick(function(){K["a"].$emit("vf-notify",{color:"success",text:"Form created!"}),K["a"].$emit("reloadPage")}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.error(e.t0),K["a"].$emit("vf-notify",{color:"error",text:e.t0.message||"something went wrong try again later"});case 16:this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[1,12]])}));function t(){return e.apply(this,arguments)}return t}(),getForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.prev=3,e.next=6,this.$store.dispatch("forms/fetchOne",t);case 6:this.form=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),console.error(e.t0);case 12:this.loading=!1;case 13:case"end":return e.stop()}},e,this,[[3,9]])}));function t(t){return e.apply(this,arguments)}return t}()},computed:{isEdit:function(){return this.$route.params.id}}},L=N,P=Object(g["a"])(L,i,r,!1,null,null,null);P.options.__file="create.vue";t["default"]=P.exports},"6c48":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{"content-class":"dialog-show",value:!0,width:e.simulateMobile?390:900},on:{input:function(t){e.$emit("close")}}},[i("v-toolbar",[i("v-toolbar-title",[e._v("Show Form")]),i("v-spacer"),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],attrs:{depressed:""}},[i("v-switch",{attrs:{label:e.simulateMobile?"Mobile":"Desktop"},model:{value:e.simulateMobile,callback:function(t){e.simulateMobile=t},expression:"simulateMobile"}})],1)],1),i("div",{staticClass:"show-container"},[e.simulateMobile&&e.$vuetify.breakpoint.mdAndUp?i("img",{attrs:{src:n("3100")}}):e._e(),e.submitted?i("div",{staticClass:"show-container-insider"},e._l(e.formWithValue,function(t,n){return i("div",{key:n},[i("label",[e._v(e._s(t.label))]),i("br"),i("span",[e._v(e._s(t.value))])])}),0):i("v-form",{ref:"form",staticClass:"show-container-insider",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[i("v-card",[i("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(e._s(e.form.form))]),i("v-card-text",e._l(e.form.fields,function(t,n){return i("field-to-component",{key:n,attrs:{field:t,value:e.formValues[n]},on:{input:function(t){return e.handleFieldInput(n,t)}}})}),1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"success",type:"submit"}},[e._v("Submit")])],1)],1)],1)],1)],1)},r=[],o=n("be94"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.componentTag,{tag:"component",attrs:{field:e.field,value:e.value},on:{input:function(t){return e.$emit("input",t)}}})},l=[],s=(n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v(e._s(e.field.label))]),e._l(e.field.options,function(t,i){return n("v-checkbox",{key:i,attrs:{"hide-details":"",value:t.value,label:t.label,required:e.field.required},on:{input:function(t){return e.$emit("input",t)}}})})],2)}),u=[],c={name:"vf-checkbox",props:{value:{type:Object,default:function(){return{}}},field:{type:Object,required:!0}}},f=c,d=n("2877"),p=Object(d["a"])(f,s,u,!1,null,null,null);p.options.__file="vf-checkbox.vue";var v=p.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-text-field",{attrs:{label:e.field.label,value:e.value,rules:e.rules},on:{input:function(t){return e.$emit("input",t)}}})},h=[],b={name:"vf-input-text",props:{value:{type:String,default:""},field:{type:Object,required:!0}},computed:{rules:function(){var e=[];return this.field.required&&e.push(function(e){return!!e||"Required."}),e}}},y=b,_=Object(d["a"])(y,m,h,!1,null,null,null);_.options.__file="vf-input-text.vue";var x=_.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-radio-group",{attrs:{label:e.field.label,value:e.value},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.field.options,function(t,i){return n("v-radio",{key:i,attrs:{value:t.value,label:t.label,required:e.value.required}})}),1)},w=[],O={name:"vf-radio",props:{value:{type:Object,default:function(){return{}}},field:{type:Object,required:!0}}},$=O,k=Object(d["a"])($,g,w,!1,null,null,null);k.options.__file="vf-radio.vue";var q=k.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-select",{attrs:{label:e.field.label,rules:e.rules,items:e.field.options,"item-text":"label","item-value":"text"},on:{input:e.handleInput}})},A=[],V=n("7fbe"),S={name:"vf-select",props:{value:{type:String,default:""},field:{type:Object,required:!0}},methods:{handleInput:function(e){this.$emit("input",e)}},computed:{rules:function(){var e=[];return this.field.required&&e.push(V["a"].required),e}}},E=S,D=Object(d["a"])(E,j,A,!1,null,null,null);D.options.__file="vf-select.vue";var C=D.exports,F=n("0d23"),R={name:"field-to-component",components:{VfCheckbox:v,VfInputText:x,VfRadio:q,VfSelect:C},props:{field:{type:Object,required:!0},value:{type:null}},computed:{componentTag:function(){var e=this,t=F["a"].find(function(t){return t.value===e.field.type});return t?t.component:""}}},T=R,I=Object(d["a"])(T,a,l,!1,null,null,null);I.options.__file="field-to-component.vue";var M=I.exports,K={name:"dialog-show",components:{FieldToComponent:M},props:{form:{type:Object,required:!0}},data:function(){return{submitted:!1,simulateMobile:!0,isValid:!0,formValues:{}}},methods:{handleSubmit:function(){this.$refs.form.validate(),this.isValid&&(this.submitted=!0)},handleFieldInput:function(e,t){this.formValues[e]=t}},computed:{formWithValue:function(){var e=this;return this.form.fields.map(function(t,n){return Object(o["a"])({},t,{value:e.formValues[n]})})}}},N=K,L=(n("be5f"),Object(d["a"])(N,i,r,!1,null,null,null));L.options.__file="dialog-show.vue";t["a"]=L.exports},"6f21":function(e,t,n){},7514:function(e,t,n){"use strict";var i=n("5ca1"),r=n("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},7944:function(e,t,n){"use strict";var i=n("ee21"),r=n.n(i);r.a},"7fbe":function(e,t,n){"use strict";t["a"]={required:function(e){return Boolean(e)||"Required."}}},8615:function(e,t,n){var i=n("5ca1"),r=n("504c")(!1);i(i.S,"Object",{values:function(e){return r(e)}})},be5f:function(e,t,n){"use strict";var i=n("6f21"),r=n.n(i);r.a},bf85:function(e,t,n){},cd1c:function(e,t,n){var i=n("e853");e.exports=function(e,t){return new(i(e))(t)}},e481:function(e,t,n){"use strict";var i=n("1716"),r=n.n(i);r.a},e853:function(e,t,n){var i=n("d3f4"),r=n("1169"),o=n("2b4c")("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},ee21:function(e,t,n){},f872:function(e,t,n){"use strict";var i=n("bf85"),r=n.n(i);r.a}}]);
//# sourceMappingURL=forms-create.09330199.js.map